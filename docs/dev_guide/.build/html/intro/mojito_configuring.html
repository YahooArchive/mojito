

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
     <title>Configuring Mojito</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/print.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '',
        COLLAPSE_INDEX: true,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/theme_extras.js"></script>
   </head> 

     <div class="header"><h1 class="heading"><a href="#">
          <span>Mojito</span></a></h1>
      </div>
      <div class="topnav">
        <p>
        <a class="uplink" href="../">Mojito Documentation</a>
        &#160;&#160;::&#160;&#160;
        <a href="../index.html" title="Mojito">Mojito</a>
        &#160;&#160;::&#160;&#160;
        
           <a href="mojito_mvc.html">MVC in Mojito</a>
        &#160;&#160;::&#160;&#160;
        
        
           <a href="mojito_binders.html">Mojito Binders</a>
        
        </p>

      </div>
      <div class="content">
   <div class="section" id="configuring-mojito">
<h1>Configuring Mojito<a class="headerlink" href="#configuring-mojito" title="Permalink to this headline">¶</a></h1>
<div class="section" id="basic-information">
<span id="mojito-configuring-basic"></span><h2>Basic Information<a class="headerlink" href="#basic-information" title="Permalink to this headline">¶</a></h2>
<p>Mojito can be configured at the framework, application, and mojit levels.
Each level is configured differently, but uses same general file format
consisting of JSON or YAML. If configuration files exist in both JSON and YAML,
Mojito will use the YAML configuration file.</p>
<div class="section" id="file-format">
<span id="config-basic-file"></span><h3>File Format<a class="headerlink" href="#file-format" title="Permalink to this headline">¶</a></h3>
<div class="section" id="json">
<span id="config-basic-file-json"></span><h4>JSON<a class="headerlink" href="#json" title="Permalink to this headline">¶</a></h4>
<p>By default, configuration files in Mojito have a general top-level
structure and are in JSON format. At the top level of each configuration
file is an array. Each item of the array is an object containing configuration that
targets a specific context and runtime. This allows you to have discrete configurations
for different regions, devices, and development environments.</p>
<p>The context for a configuration object is specified by the <tt class="docutils literal"><span class="pre">settings</span></tt> property. For
each configuration object in a file, the <tt class="docutils literal"><span class="pre">settings</span></tt> property must specify a unique
context, otherwise Mojito fails. For example, the <tt class="docutils literal"><span class="pre">application.json</span></tt>  file
cannot have two configuration objects specifying the context <tt class="docutils literal"><span class="pre">environment:development</span></tt>.
See <a class="reference external" href="../topics/mojito_using_contexts.html">Using Context Configurations</a>
for more information about contexts.</p>
<p>Below is the skeleton of a configuration file with two configuration
objects, each identified by contexts defined by the <tt class="docutils literal"><span class="pre">settings</span></tt> property.
See <a class="reference internal" href="#application-configuration">Application Configuration</a> and <a class="reference internal" href="#mojit-configuration">Mojit Configuration</a> for details about specific
configuration files.</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;environment:development&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="p">...</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="p">...</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="yaml">
<span id="config-basic-file-yaml"></span><h4>YAML<a class="headerlink" href="#yaml" title="Permalink to this headline">¶</a></h4>
<p>Mojito also supports configuration files in YAML format (JSON is a subset of YAML).
The YAML file extension could be <tt class="docutils literal"><span class="pre">.yaml</span></tt> or <tt class="docutils literal"><span class="pre">.yml</span></tt>. Mojito allows comments in the
YAML files. When both  the JSON file (e.g., <tt class="docutils literal"><span class="pre">application.json</span></tt>) and the YAML file
(e.g., <tt class="docutils literal"><span class="pre">application.yaml</span></tt>) are present, the YAML file is used and a warning is issued.
For the data types of the YAML elements, please see the JSON configuration tables in
<a class="reference internal" href="#configure-mj-app"><em>Application Configuration</em></a>,
<a class="reference internal" href="#configure-mj-routing"><em>Routing</em></a>, and <a class="reference internal" href="#configure-mj-mojit"><em>Mojit Configuration</em></a>.</p>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="c1"># Example application configuration in YAML, which allows comments.</span>
  <span class="p-Indicator">-</span>
    <span class="c1"># The master context for default configurations.</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>

    <span class="c1"># You can create mojit instances in the &#39;specs&#39; object.</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span>
    <span class="c1"># The context &#39;environment:development&#39; that you can use for development.</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;environment:development&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
</pre></div>
</div>
<p>To convert JSON to YAML, we recommend using a command-line utility such as the npm module
<a class="reference external" href="https://npmjs.org/package/json2yaml">json2yaml</a>.</p>
</div>
</div>
</div>
<div class="section" id="application-configuration">
<span id="configure-mj-app"></span><h2>Application Configuration<a class="headerlink" href="#application-configuration" title="Permalink to this headline">¶</a></h2>
<p>Both the server and client runtimes of an application can be configured. The
application is configured in the <tt class="docutils literal"><span class="pre">application.json</span></tt> file in the application
directory. The file consists of an array of zero or more <tt class="docutils literal"><span class="pre">configuration</span></tt>
objects. Using the <tt class="docutils literal"><span class="pre">configuration</span></tt> object, you can configure the following
for your application:</p>
<ul class="simple">
<li>port number</li>
<li>location of routing files</li>
<li>path to static assets</li>
<li>YUI 3</li>
<li>URL path for client and server communication</li>
<li>declare mojit instances</li>
<li>logging</li>
<li>static resources</li>
</ul>
<p>The tables below describe the <tt class="docutils literal"><span class="pre">configuration</span></tt> object and its properties.
Those properties that have object values have tables below describing their
properties as well except the <tt class="docutils literal"><span class="pre">config</span></tt> object, which is user defined.
To learn how to use select configurations based on the runtime
environment, see <a class="reference external" href="../topics/mojito_using_contexts.html">Using Context Configurations</a>.</p>
<div class="section" id="configuration-object">
<span id="app-configuration-obj"></span><h3>configuration Object<a class="headerlink" href="#configuration-object" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="14%" />
<col width="12%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">actionTimeout</span></tt></td>
<td>number</td>
<td>60000</td>
<td>The number of milliseconds that an action can
run without calling <tt class="docutils literal"><span class="pre">ac.done</span></tt> or <tt class="docutils literal"><span class="pre">ac.error</span></tt> before
Mojito logs a warning and invokes <tt class="docutils literal"><span class="pre">ac.error</span></tt> with a
Timeout error.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">appPort</span></tt></td>
<td>number</td>
<td>8666</td>
<td>The port number (1-65355) that the application
will use.</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="#builds-obj">builds</a></td>
<td>object</td>
<td>N/A</td>
<td>Specifies configuration for builds.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">middleware</span></tt></td>
<td>array of strings</td>
<td>[]</td>
<td>A list of paths to the Node.js module that exports
a Connect middleware function.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">mojitDirs</span></tt></td>
<td>array of strings</td>
<td>[]</td>
<td>The list of directories specifying where to find a
single mojit type. The mojits specified by
<tt class="docutils literal"><span class="pre">mojitDirs</span></tt> are loaded after the mojits in
<tt class="docutils literal"><span class="pre">mojitsDirs</span></tt>. If a directory doesn&#8217;t start with
a &#8220;/&#8221;, it is taken as relative to the application
directory.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">mojitsDirs</span></tt></td>
<td>array of strings</td>
<td>[&#8216;mojits&#8217;]</td>
<td>The list of directories specifying where to find
mojit types. If a directory doesn&#8217;t start with a
&#8220;/&#8221;, it is taken as relative to the application
directory.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">routesFiles</span></tt></td>
<td>array of strings</td>
<td>[&#8216;routes.json&#8217;]</td>
<td>The list of files specifying where to find routing
information. If a file doesn&#8217;t start with a &#8220;/&#8221;,
it is taken as relative to the application
directory.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">selector</span></tt></td>
<td>string</td>
<td>N/A</td>
<td>The version of the resource. A resource is either a
file to Mojito or metadata to the <a class="reference external" href="../topics/mojito_resource_store.html">Resource Store</a>. For example,
<tt class="docutils literal"><span class="pre">&quot;selector&quot;:</span> <span class="pre">&quot;iphone&quot;</span></tt> would configure the Resource
Store to find resources with the identifier <tt class="docutils literal"><span class="pre">iphone</span></tt>
such as <tt class="docutils literal"><span class="pre">index.iphone.hb.html</span></tt>.
See the <a class="reference external" href="../topics/mojito_resource_store.html#selector-property">selector Property</a> and <a class="reference external" href="../topics/mojito_resource_store.html#selectors">Selectors</a> for
for more information.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">settings</span></tt></td>
<td>array of strings</td>
<td>[&#8220;master&#8221;]</td>
<td>Defines the context of the configuration. The
context consists of a key-value pair that can
specify the environment and environment
configurations. These key-value pair corresponds
to the configuration objects that are elements of
the <tt class="docutils literal"><span class="pre">dimensions</span></tt> array in the <tt class="docutils literal"><span class="pre">dimensions.json</span></tt>
file. For example, the following contexts could be
used to specify the testing environment and the
English language : <tt class="docutils literal"><span class="pre">&quot;environment:testing&quot;</span></tt>,
<tt class="docutils literal"><span class="pre">&quot;lang:en&quot;</span></tt>. See <a class="reference external" href="../topics/mojito_using_contexts.html">Using Context Configurations</a>.</td>
</tr>
<tr class="row-odd"><td><a class="reference external" href="#specs-obj">specs</a></td>
<td>object</td>
<td>N/A</td>
<td>Specifies the mojit instances. See the
<a class="reference internal" href="#specs-obj"><em>specs Object</em></a> for details.</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="#statichandling-obj">staticHandling</a></td>
<td>object</td>
<td>N/A</td>
<td>Gives details on the handling of static resources.
See the <a class="reference internal" href="#statichandling-obj"><em>staticHandling Object</em></a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">tunnelPrefix</span></tt></td>
<td>string</td>
<td>&#8220;/tunnel/&#8221;</td>
<td>The URL prefix for the communication tunnel
from the client back to the server.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">tunnelTimeout</span></tt></td>
<td>number</td>
<td>10000</td>
<td>The timeout in milliseconds for the communication
tunnel from the client back to the server.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#viewengine-obj"><em>viewEngine</em></a></td>
<td>object</td>
<td>N/A</td>
<td>Contains information about caching and preloading
templates.</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="#yui-obj">yui</a></td>
<td>object</td>
<td>N/A</td>
<td>When Mojito is deployed to client, the
<a class="reference internal" href="../topics/mojito_resource_store.html#yui-obj"><em>yui Object</em></a> specifies where and how to obtain
YUI 3. The <tt class="docutils literal"><span class="pre">yui.config</span></tt> object also contains
logging configurations.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some of the values for the properties above can be dynamically changed by code
or a new context (runtime environment) may use a configuration
object that has different <tt class="docutils literal"><span class="pre">settings</span></tt>, and thus, a different set of
configurations. Other configurations are considered static, meaning that they
cannot be changed once an application is started in a base context (environment).
See <a class="reference external" href="../topics/mojito_using_contexts.html#static-configurations">Static Configurations</a>
for more information and a list of the static configurations.</p>
</div>
<div class="section" id="builds-object">
<span id="builds-obj"></span><h4>builds Object<a class="headerlink" href="#builds-object" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="26%" />
<col width="12%" />
<col width="63%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference external" href="#html5app-obj">html5app</a></td>
<td>object</td>
<td>Specifies configuration for HTML5 applications
created with <tt class="docutils literal"><span class="pre">$</span> <span class="pre">mojito</span> <span class="pre">build</span> <span class="pre">html5app</span></tt>.</td>
</tr>
</tbody>
</table>
<div class="section" id="html5app-object">
<span id="html5app-obj"></span><h5>html5app Object<a class="headerlink" href="#html5app-object" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="14%" />
<col width="10%" />
<col width="14%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">attachManifest</span></tt></td>
<td>boolean</td>
<td>no</td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">true</span></tt>, the <tt class="docutils literal"><span class="pre">manifest</span></tt>
attribute is added to <tt class="docutils literal"><span class="pre">&lt;html&gt;</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">buildDir</span></tt></td>
<td>string</td>
<td>no</td>
<td>none</td>
<td>The path to the built HTML5 application.
If not specified, the HTML5 application
will be placed in
<tt class="docutils literal"><span class="pre">artifacts/build/html5app</span></tt>. The
specified path for <tt class="docutils literal"><span class="pre">buildDir</span></tt> will be
overridden if a build path is given to
the following command:
<tt class="docutils literal"><span class="pre">mojito</span> <span class="pre">build</span> <span class="pre">html5app</span> <span class="pre">[&lt;build_path&gt;]</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">forceRelativePaths</span></tt></td>
<td>boolean</td>
<td>no</td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">true</span></tt>, the server-relative paths
(those starting with &#8220;/&#8221;) are converted
into paths relative to the generated
file.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">urls</span></tt></td>
<td>array of
strings</td>
<td>yes</td>
<td>none</td>
<td>Lists the routing paths to views that
be rendered into static pages and then
cached so that the page can be viewed
offline. For example, if the running
application renders the view
<tt class="docutils literal"><span class="pre">view.html</span></tt>, you could configure the
application to statically create and
cache <tt class="docutils literal"><span class="pre">view.html</span></tt> in
<tt class="docutils literal"><span class="pre">{app_dir}/artifacts/builds/html5app</span></tt>
using the following:
<tt class="docutils literal"><span class="pre">urls:</span> <span class="pre">[</span> <span class="pre">'/view.html']</span></tt></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="specs-object">
<span id="specs-obj"></span><h4>specs Object<a class="headerlink" href="#specs-object" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">specs</span></tt> object can contain one or more mojit instances that are named by
the developer. Each mojit instance is represented by an object and has
a type that specifies a mojit that was created with <tt class="docutils literal"><span class="pre">mojito</span> <span class="pre">create</span> <span class="pre">mojit</span> <span class="pre">&lt;mojit_name&gt;</span></tt>
or a built-in <a class="reference external" href="../topics/mojito_frame_mojits.html">frame mojit</a>.
The table below contains the properties that a mojit instance object can contain.</p>
<div class="section" id="mojit-instance-object">
<span id="mojit-instance-obj"></span><h5>Mojit Instance Object<a class="headerlink" href="#mojit-instance-object" title="Permalink to this headline">¶</a></h5>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="13%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">action</span></tt></td>
<td>string</td>
<td>Specifies a default action to use if the mojit instance wasn&#8217;t
dispatched with one. If not given and the mojit wasn&#8217;t dispatched
with an explicit action, the action defaults to <tt class="docutils literal"><span class="pre">index</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">base</span></tt></td>
<td>string</td>
<td>Specifies another mojit instance to use as a &#8220;base&#8221;. Any changes
in this instance will override those in the base. Only mojit
instances with an ID can be used as a base, and only mojit
instances specified at the top-level of the <tt class="docutils literal"><span class="pre">specs</span></tt> object in
<tt class="docutils literal"><span class="pre">application.json</span></tt> have an ID. The ID is the instance&#8217;s name in
the <tt class="docutils literal"><span class="pre">specs</span></tt> object. Either the <tt class="docutils literal"><span class="pre">type</span></tt> or <tt class="docutils literal"><span class="pre">base</span></tt> property is
required in the <tt class="docutils literal"><span class="pre">specs</span></tt> object.</td>
</tr>
<tr class="row-even"><td><a class="reference external" href="#config-obj">config</a></td>
<td>object</td>
<td>This is user-defined information that allows you to configure the
controller. Mojito does not interpret any part of this object. You can
access your defined <tt class="docutils literal"><span class="pre">config</span></tt> in the controller using the <a class="reference external" href="../../api/classes/Config.common.html">Config
addon</a>. For example:
<tt class="docutils literal"><span class="pre">ac.config.get('message')</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">defer</span></tt></td>
<td>boolean</td>
<td>If <tt class="docutils literal"><span class="pre">true</span></tt> and the mojit instance is a child of the
<tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>, an empty node will initially be rendered and
then content will be lazily loaded. See
<a class="reference external" href="../topics/mojito_frame_mojits.html#lazyloadmojit">LazyLoadMojit</a>
for more information.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">propagateFailure</span></tt></td>
<td>boolean</td>
<td>If <tt class="docutils literal"><span class="pre">true</span></tt>, when a child mojit calls the method <tt class="docutils literal"><span class="pre">ac.error</span></tt>, the
error message is passed to the parent and the parent mojit fails.
When <tt class="docutils literal"><span class="pre">false</span></tt> (the default value), the child mojit can call
<tt class="docutils literal"><span class="pre">ac.error</span></tt> to pass an error message to the parent, but the parent
will not fail. See <a class="reference external" href="../topics/mojito_composite_mojits.html#mojito_composite-child_errors">Propagating Child Mojit Errors to Parent Mojit</a>
for more information.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">proxy</span></tt></td>
<td>object</td>
<td>This is a normal mojit spec to proxy this mojit&#8217;s execution
through. This feature only works when defined within a child
mojit. When specified, Mojito will replace this mojit child with a
mojit spec of the specified type, which is expected to handle the
child&#8217;s execution itself. The proxy mojit will be executed in
place of the mojit being proxied. The original proxied child mojit
spec will be attached as a <em>proxied</em> object on the proxy mojit&#8217;s
<tt class="docutils literal"><span class="pre">config</span></tt> for it to handle as necessary.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">type</span></tt></td>
<td>string</td>
<td>Specifies the mojit type. Either the <tt class="docutils literal"><span class="pre">type</span></tt> or <tt class="docutils literal"><span class="pre">base</span></tt> property is
required in the <tt class="docutils literal"><span class="pre">specs</span></tt> object.</td>
</tr>
</tbody>
</table>
<div class="section" id="config-object">
<span id="config-obj"></span><h6>config Object<a class="headerlink" href="#config-object" title="Permalink to this headline">¶</a></h6>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="12%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">child</span></tt></td>
<td>object</td>
<td>Contains the <tt class="docutils literal"><span class="pre">type</span></tt> property that specifies mojit type and may also
contain a <tt class="docutils literal"><span class="pre">config</span></tt> object. This property can only be used when the mojit
instance is a child of the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>. See
<a class="reference external" href="../topics/mojito_frame_mojits.html#htmlframemojit">HTMLFrameMojit</a> for
more information.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">children</span></tt></td>
<td>object</td>
<td>Contains one or more mojit instances that specify the mojit type with
the property <tt class="docutils literal"><span class="pre">type</span></tt>. Each mojit instance may also contain a <tt class="docutils literal"><span class="pre">config</span></tt>
objects.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">deploy</span></tt></td>
<td>boolean</td>
<td>If set to <tt class="docutils literal"><span class="pre">true</span></tt>, Mojito application code is deployed to the client.
See <a class="reference internal" href="#deploy-app"><em>Configuring Applications to Be Deployed to Client</em></a> for details. The default value is <tt class="docutils literal"><span class="pre">false</span></tt>. Your
mojit code will only be deployed if it is a child of <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">title</span></tt></td>
<td>string</td>
<td>If application is using the frame mojit <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>,
the value will be used for the HTML <tt class="docutils literal"><span class="pre">&lt;title&gt;</span></tt> element.
See <a class="reference external" href="../topics/mojito_frame_mojits.html#htmlframemojit">HTMLFrameMojit</a>
for more information.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">{key}</span></tt></td>
<td>any</td>
<td>The <tt class="docutils literal"><span class="pre">{key}</span></tt> is user defined and can have any type of configuration value.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="statichandling-object">
<span id="statichandling-obj"></span><h4>staticHandling Object<a class="headerlink" href="#statichandling-object" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="12%" />
<col width="24%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">appName</span></tt></td>
<td>string</td>
<td>{application-directory}</td>
<td>Specifies the path prefix for assets that
originated in the application directory, but which
are not part of a mojit.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">cache</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>When <tt class="docutils literal"><span class="pre">true</span></tt>, Mojito caches files in memory
indefinitely until they are invalidated by a
conditional GET request. When given <tt class="docutils literal"><span class="pre">maxAge</span></tt>,
Mojito caches file for the duration given by
<tt class="docutils literal"><span class="pre">maxAge</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">forceUpdate</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>When <tt class="docutils literal"><span class="pre">false</span></tt>, static assets are returned with the
HTTP headers (<tt class="docutils literal"><span class="pre">Last-Modified</span></tt>, <tt class="docutils literal"><span class="pre">Cache-Control</span></tt>,
<tt class="docutils literal"><span class="pre">ETag</span></tt>) for browser caching. Set to <tt class="docutils literal"><span class="pre">true</span></tt> to
prevent these headers from being sent.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">frameworkName</span></tt></td>
<td>string</td>
<td>&#8220;mojito&#8221;</td>
<td>Specifies the path prefix for assets that
originated from Mojito, but which are not part of
a mojit.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">maxAge</span></tt></td>
<td>number</td>
<td>0</td>
<td>The time in milliseconds that the browser should
cache.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">prefix</span></tt></td>
<td>string</td>
<td>&#8220;static&#8221;</td>
<td>The URL prefix for all statically served assets.
Specified as a simple string and wrapped in &#8220;/&#8221;.
For example <tt class="docutils literal"><span class="pre">&quot;static&quot;</span></tt> becomes the URL prefix
<tt class="docutils literal"><span class="pre">/static/</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="viewengine-object">
<span id="viewengine-obj"></span><h4>viewEngine Object<a class="headerlink" href="#viewengine-object" title="Permalink to this headline">¶</a></h4>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="17%" />
<col width="15%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cacheTemplates</span></tt></td>
<td>boolean</td>
<td>true</td>
<td>Specifies whether the view engine should attempt
to cache the view. Note that not all view engines
support caching.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">preloadTemplates</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>Determines if templates are preloaded in memory.
This is beneficial for small applications, but not
recommended for applications with many views and
partials because it may require a significant amount
of memory that could degrade the performance.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="yui-object">
<span id="yui-obj"></span><h4>yui Object<a class="headerlink" href="#yui-object" title="Permalink to this headline">¶</a></h4>
<p>See <a class="reference internal" href="#example-application-configurations">Example Application Configurations</a> for an example of the <tt class="docutils literal"><span class="pre">yui</span></tt> object.</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="17%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><a class="reference internal" href="#yui-conf"><em>config</em></a></td>
<td>object</td>
<td>Used to populate the <a class="reference external" href="http://yuilibrary.com/yui/docs/yui/#yui_config">YUI_config</a> global variable that allows you to configure every YUI
instance on the page even before YUI is loaded. For example, you can
configure logging or YUI not to load its default CSS with the
following: <tt class="docutils literal"><span class="pre">&quot;yui&quot;:</span> <span class="pre">{</span> <span class="pre">&quot;config&quot;:</span> <span class="pre">{</span> <span class="pre">&quot;fetchCSS&quot;:</span> <span class="pre">false</span> <span class="pre">}</span> <span class="pre">}</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">showConsoleInClient</span></tt></td>
<td>boolean</td>
<td>Determines if the YUI debugging console will be shown on the
client.</td>
</tr>
</tbody>
</table>
<div class="section" id="yui-conf">
<span id="id4"></span><h5>config Object<a class="headerlink" href="#yui-conf" title="Permalink to this headline">¶</a></h5>
<p>The <tt class="docutils literal"><span class="pre">config</span></tt> object can be used to configure all the options for the YUI instance.
To see all the options for the <tt class="docutils literal"><span class="pre">config</span></tt> object, see the
<a class="reference external" href="http://yuilibrary.com/yui/docs/api/classes/config.html">YUI config Class</a>. Some of the
properties of the <tt class="docutils literal"><span class="pre">config</span></tt> object used for configuring logging are shown
below. For more information about how to configure YUI for Mojito applications, see
<a class="reference external" href="../topics/mojito_yui_config.html">Configuring YUI in Mojito</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="11%" />
<col width="34%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">base</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">&quot;http://yui.yahooapis.com/{YUI</span> <span class="pre">VERSION}/build/?&quot;</span></tt></td>
<td>The base URL for a dynamic combo handler. This will be used
to make combo-handled module requests if <tt class="docutils literal"><span class="pre">combine</span></tt> is set
to <tt class="docutils literal"><span class="pre">true</span></tt>. You can also set the base to a local path to
serve YUI, such as <tt class="docutils literal"><span class="pre">/static/yui</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">combine</span></tt></td>
<td>boolean</td>
<td>true</td>
<td>If <tt class="docutils literal"><span class="pre">true</span></tt>, YUI will use a combo handler to load multiple
modules in as few requests as possible. Providing a value for
the <tt class="docutils literal"><span class="pre">base</span></tt> property will cause combine to default to
<tt class="docutils literal"><span class="pre">false</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">comboBase</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">&quot;http://yui.yahooapis.com/combo?&quot;</span></tt></td>
<td>The base URL for a dynamic combo handler. This will be used
to make combo-handled module requests if combine is set to
<tt class="docutils literal"><span class="pre">true</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">comboSep</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">&quot;&amp;&quot;</span></tt></td>
<td>The default separator to use between files in a combo URL.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">root</span></tt></td>
<td>string</td>
<td><tt class="docutils literal"><span class="pre">&quot;{YUI</span> <span class="pre">VERSION}/build/&quot;</span></tt></td>
<td>Root path to prepend to module path for the combo service.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">debug</span></tt></td>
<td>boolean</td>
<td>true</td>
<td>Determines whether <tt class="docutils literal"><span class="pre">Y.log</span></tt> messages are written to the
browser console.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">logExclude</span></tt></td>
<td>object</td>
<td>none</td>
<td>Excludes the logging of the YUI module(s) specified.
For example: <tt class="docutils literal"><span class="pre">logExclude:</span> <span class="pre">{</span> <span class="pre">&quot;logModel&quot;:</span> <span class="pre">true</span> <span class="pre">}</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">logInclude</span></tt></td>
<td>object</td>
<td>none</td>
<td>Includes the logging of the YUI module(s) specified.
For example: <tt class="docutils literal"><span class="pre">logInclude:</span> <span class="pre">{</span> <span class="pre">&quot;DemoBinderIndex&quot;:</span> <span class="pre">true</span> <span class="pre">}</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">logLevel</span></tt></td>
<td>string</td>
<td>&#8220;debug&#8221;</td>
<td>Specifies the lowest log level to include in the
log output. The log level can only be set with <tt class="docutils literal"><span class="pre">logLevel</span></tt>
if <tt class="docutils literal"><span class="pre">debug</span></tt> is set to <tt class="docutils literal"><span class="pre">true</span></tt>. For more information,
see <a class="reference external" href="../topics/mojito_logging.html#log-levels">Log Levels</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">logLevelOrder</span></tt></td>
<td>array of strings</td>
<td><tt class="docutils literal"><span class="pre">['debug',</span> <span class="pre">'mojito',</span>
<span class="pre">'info',</span> <span class="pre">'warn',</span> <span class="pre">'error'</span>
<span class="pre">'none']</span></tt></td>
<td>Defines the order of evaluating log levels. Each log
level is a superset of the levels that follow, so messages
at levels within the set will be displayed. Thus, at the
<tt class="docutils literal"><span class="pre">debug</span></tt> level, messages at all levels will be displayed,
and at the <tt class="docutils literal"><span class="pre">mojito</span></tt> level, levels <tt class="docutils literal"><span class="pre">info</span></tt>, <tt class="docutils literal"><span class="pre">warn</span></tt>,
<tt class="docutils literal"><span class="pre">error</span></tt> will be displayed, etc.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">seed</span></tt></td>
<td>array of strings</td>
<td><tt class="docutils literal"><span class="pre">[&quot;yui-base&quot;,</span> <span class="pre">&quot;loader-base&quot;,</span> <span class="pre">&quot;loader-yui3&quot;,</span>
<span class="pre">&quot;loader-app&quot;,</span> <span class="pre">&quot;loader-app-base{langPath}&quot;]</span></tt></td>
<td>Similar to the YUI seed file as explained in the <a class="reference external" href="http://yuilibrary.com/yui/quick-start/">YUI Quickstart</a> you use the <tt class="docutils literal"><span class="pre">seed</span></tt> array
to specify the YUI components to load for your application. You can
also specify URLs to the YUI seed files, allowing the client to load
YUI. See <a class="reference internal" href="../topics/mojito_yui_config.html#seed-mojito"><em>Seed File in Mojito Applications</em></a> for
more information.</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="configuring-applications-to-have-multiple-mojits">
<span id="config-multiple-mojits"></span><h3>Configuring Applications to Have Multiple Mojits<a class="headerlink" href="#configuring-applications-to-have-multiple-mojits" title="Permalink to this headline">¶</a></h3>
<p>Applications not only can specify multiple mojit instances in <tt class="docutils literal"><span class="pre">application.json</span></tt>, but
mojits can have one or more child mojits as well.</p>
<div class="section" id="application-with-multiple-mojits">
<span id="config-mult-mojits-app"></span><h4>Application With Multiple Mojits<a class="headerlink" href="#application-with-multiple-mojits" title="Permalink to this headline">¶</a></h4>
<p>Your application configuration can specify multiple mojit instances of the same or
different types in the <tt class="docutils literal"><span class="pre">specs</span></tt> object. In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the
mojit instances <tt class="docutils literal"><span class="pre">sign_in</span></tt> and <tt class="docutils literal"><span class="pre">sign_out</span></tt> are defined:</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;sign_in&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SignInMojit&quot;</span>
      <span class="p">},</span>
      <span class="s2">&quot;sign_out&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SignOutMojit&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">sign_in</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;SignInMojit&quot;</span>
      <span class="l-Scalar-Plain">sign_out</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;SignOutMojit&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="parent-mojit-with-child-mojit">
<span id="config-mult-mojits-parent-child"></span><h4>Parent Mojit With Child Mojit<a class="headerlink" href="#parent-mojit-with-child-mojit" title="Permalink to this headline">¶</a></h4>
<p>A mojit instance can be configured to have a child mojit using the <tt class="docutils literal"><span class="pre">child</span></tt>
object. In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the mojit instance <tt class="docutils literal"><span class="pre">parent</span></tt>
of type <tt class="docutils literal"><span class="pre">ParentMojit</span></tt> has a child mojit of type <tt class="docutils literal"><span class="pre">ChildMojit</span></tt>.</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;parent&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ParentMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ChildMojit&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">parent</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ParentMojit&quot;</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">child</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ChildMojit&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="parent-mojit-with-children">
<span id="config-mult-mojits-parent-children"></span><h4>Parent Mojit With Children<a class="headerlink" href="#parent-mojit-with-children" title="Permalink to this headline">¶</a></h4>
<p>A mojit instance can also be configured to have more than one child mojits using
the <tt class="docutils literal"><span class="pre">children</span></tt> object that contains mojit instances. To execute the children,
the parent mojit would use the <tt class="docutils literal"><span class="pre">Composite</span> <span class="pre">addon</span></tt>.
See <a class="reference external" href="../topics/mojito_composite_mojits.html#composite-mojits">Composite Mojits</a>
for more information.</p>
<p>In the example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the mojit instance <tt class="docutils literal"><span class="pre">father</span></tt> of type
<tt class="docutils literal"><span class="pre">ParentMojit</span></tt> has the children <tt class="docutils literal"><span class="pre">son</span></tt> and <tt class="docutils literal"><span class="pre">daughter</span></tt> of type <tt class="docutils literal"><span class="pre">ChildMojit</span></tt>.</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;father&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ParentMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;son&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ChildMojit&quot;</span>
            <span class="p">},</span>
            <span class="s2">&quot;daughter&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ChildMojit&quot;</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">father</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ParentMojit&quot;</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">son</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ChildMojit&quot;</span>
            <span class="l-Scalar-Plain">daughter</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ChildMojit&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="child-mojit-with-children">
<span id="config-mult-mojits-child-children"></span><h4>Child Mojit With Children<a class="headerlink" href="#child-mojit-with-children" title="Permalink to this headline">¶</a></h4>
<p>A parent mojit can have a child that has its own children. The parent mojit
specifies a child with the <tt class="docutils literal"><span class="pre">child</span></tt> object, which in turn lists children in the
<tt class="docutils literal"><span class="pre">children</span></tt> object. For the child to execute its children,it would use the <tt class="docutils literal"><span class="pre">Composite</span></tt>
addon. See <a class="reference external" href="../topics/mojito_composite_mojits.html#composite-mojits">Composite Mojits</a>
for more information.</p>
<p>The example <tt class="docutils literal"><span class="pre">application.json</span></tt> below creates the parent mojit <tt class="docutils literal"><span class="pre">first_level</span></tt> with a
<tt class="docutils literal"><span class="pre">child</span></tt> that has the children <tt class="docutils literal"><span class="pre">third_level_a</span></tt> and <tt class="docutils literal"><span class="pre">third_level_b</span></tt>.</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;first_level&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FirstLevelMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SecondLevelMojit&quot;</span><span class="p">,</span>
              <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;third_level_a&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ThirdLevelMojit&quot;</span>
                <span class="p">},</span>
                <span class="s2">&quot;third_level_b&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ThirdLevelMojit&quot;</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">first_level</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;FirstLevelMojit&quot;</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">child</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;SecondLevelMojit&quot;</span>
              <span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">third_level_a</span><span class="p-Indicator">:</span>
                  <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ThirdLevelMojit&quot;</span>
                <span class="l-Scalar-Plain">third_level_b</span><span class="p-Indicator">:</span>
                  <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ThirdLevelMojit&quot;</span>
</pre></div>
</div>
<p>The child mojits can also have their own children, but beware that
having so many child mojits may cause memory issues. In our updated
example <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the <tt class="docutils literal"><span class="pre">third_level_b</span></tt> mojit now has
its own children:</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;first_level&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FirstLevelMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;SecondLevelMojit&quot;</span><span class="p">,</span>
            <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
              <span class="s2">&quot;third_level_a&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ThirdLevelMojit&quot;</span>
              <span class="p">},</span>
              <span class="s2">&quot;third_level_b&quot;</span><span class="o">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;ThirdLevelMojit&quot;</span><span class="p">,</span>
                <span class="s2">&quot;children&quot;</span><span class="o">:</span> <span class="p">{</span>
                  <span class="s2">&quot;fourth_level_a&quot;</span><span class="o">:</span> <span class="p">{</span>
                     <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FourthLevelMojit&quot;</span>
                  <span class="p">},</span>
                  <span class="s2">&quot;fourth_level_b&quot;</span><span class="o">:</span> <span class="p">{</span>
                     <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;FourthLevelMojit&quot;</span>
                  <span class="p">}</span>
                <span class="p">}</span>
              <span class="p">}</span>
            <span class="p">}</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">first_level</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;FirstLevelMojit&quot;</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">child</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;SecondLevelMojit&quot;</span>
            <span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
              <span class="l-Scalar-Plain">third_level_a</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ThirdLevelMojit&quot;</span>
              <span class="l-Scalar-Plain">third_level_b</span><span class="p-Indicator">:</span>
                <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;ThirdLevelMojit&quot;</span>
                <span class="l-Scalar-Plain">children</span><span class="p-Indicator">:</span>
                  <span class="l-Scalar-Plain">fourth_level_a</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;FourthLevelMojit&quot;</span>
                  <span class="l-Scalar-Plain">fourth_level_b</span><span class="p-Indicator">:</span>
                    <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;FourthLevelMojit&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="configuring-applications-to-be-deployed-to-client">
<span id="deploy-app"></span><h3>Configuring Applications to Be Deployed to Client<a class="headerlink" href="#configuring-applications-to-be-deployed-to-client" title="Permalink to this headline">¶</a></h3>
<p>To configure Mojito to deploy code to the client, you must be using the <tt class="docutils literal"><span class="pre">HTMLFrameMojit</span></tt>
as the parent mojit and also set the <tt class="docutils literal"><span class="pre">deploy</span></tt> property of the <a class="reference internal" href="#app-configuration-obj"><em>configuration Object</em></a>
object to <tt class="docutils literal"><span class="pre">true</span></tt> in the <tt class="docutils literal"><span class="pre">config</span></tt> object of your mojit instance.</p>
<div class="section" id="what-gets-deployed">
<span id="deploy-app-what"></span><h4>What Gets Deployed?<a class="headerlink" href="#what-gets-deployed" title="Permalink to this headline">¶</a></h4>
<p>The following is deployed to the client:</p>
<ul class="simple">
<li>Mojito framework</li>
<li>binders (and their dependencies)</li>
</ul>
<p>When a binder invokes its controller, if the controller has the <tt class="docutils literal"><span class="pre">client</span></tt> or <tt class="docutils literal"><span class="pre">common</span></tt>
affinity, then the controller and its dependencies are deployed to the client as well. If
the affinity of the controller is <tt class="docutils literal"><span class="pre">server</span></tt>, the invocation occurs on the server. In
either case, the binder can invoke the controller.</p>
</div>
<div class="section" id="example">
<span id="deploy-app-ex"></span><h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<p>The example <tt class="docutils literal"><span class="pre">application.json</span></tt> below uses the <tt class="docutils literal"><span class="pre">deploy</span></tt> property to configure the
application to be deployed to the client.</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;frame&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HTMLFrameMojit&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;deploy&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
          <span class="s2">&quot;child&quot;</span><span class="o">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;PagerMojit&quot;</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">frame</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;HTMLFrameMojit&quot;</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">deploy</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
          <span class="l-Scalar-Plain">child</span><span class="p-Indicator">:</span>
            <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;PagerMojit&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="example-application-configurations">
<span id="app-config-ex"></span><h3>Example Application Configurations<a class="headerlink" href="#example-application-configurations" title="Permalink to this headline">¶</a></h3>
<p>This example <tt class="docutils literal"><span class="pre">application.json</span></tt> defines the two mojit instances <tt class="docutils literal"><span class="pre">foo</span></tt> and <tt class="docutils literal"><span class="pre">bar</span></tt>.
The <tt class="docutils literal"><span class="pre">foo</span></tt> mojit instance is of type <tt class="docutils literal"><span class="pre">MessageViewer</span></tt>, and the <tt class="docutils literal"><span class="pre">bar</span></tt> mojit instance
uses <tt class="docutils literal"><span class="pre">foo</span></tt> as the base mojit. Both have metadata configured in the <tt class="docutils literal"><span class="pre">config</span></tt> object.</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;yui&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;showConsoleInClient&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
         <span class="s2">&quot;fetchCSS&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
         <span class="s2">&quot;combine&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
         <span class="s2">&quot;comboBase&quot;</span><span class="o">:</span> <span class="s2">&quot;http://mydomain.com/combo?&quot;</span><span class="p">,</span>
         <span class="s2">&quot;root&quot;</span><span class="o">:</span> <span class="s2">&quot;yui3/&quot;</span>
       <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;MessageViewer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;hi&quot;</span>
        <span class="p">}</span>
      <span class="p">},</span>
      <span class="s2">&quot;bar&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;base&quot;</span><span class="o">:</span> <span class="s2">&quot;foo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;hello&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">yui</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">showConsoleInClient</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
      <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">fetchCSS</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>
        <span class="l-Scalar-Plain">combine</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
        <span class="l-Scalar-Plain">comboBase</span><span class="p-Indicator">:</span> <span class="s">&quot;http://mydomain.com/combo?&quot;</span>
        <span class="l-Scalar-Plain">root</span><span class="p-Indicator">:</span> <span class="s">&quot;yui3/&quot;</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">foo</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;MessageViewer&quot;</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">message</span><span class="p-Indicator">:</span> <span class="s">&quot;hi&quot;</span>
      <span class="l-Scalar-Plain">bar</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span> <span class="s">&quot;foo&quot;</span>
        <span class="l-Scalar-Plain">config</span><span class="p-Indicator">:</span>
          <span class="l-Scalar-Plain">message</span><span class="p-Indicator">:</span> <span class="s">&quot;hello&quot;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="mojit-configuration">
<span id="configure-mj-mojit"></span><h2>Mojit Configuration<a class="headerlink" href="#mojit-configuration" title="Permalink to this headline">¶</a></h2>
<p>Although mojit instances are defined at the application level, you configure metadata and
defaults for the mojit at the mojit level. The following sections will cover configuration
at the mojit level as well as examine the configuration of the mojit instance.</p>
<div class="section" id="configuring-metadata">
<span id="configure-mojit-metadata"></span><h3>Configuring Metadata<a class="headerlink" href="#configuring-metadata" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">definition.json</span></tt> file in the mojit directory is used to specify metadata about the
mojit type. The contents of the file override the mojit type metadata that Mojito
generates from the contents of the file system.</p>
<p>The information is available from the controller using the
<a class="reference external" href="../../api/classes/Config.common.html">Config addon</a>. For example, you would use
<tt class="docutils literal"><span class="pre">ac.config.getDefinition('version')</span></tt> to get the version information.</p>
<p>The table below describes the <tt class="docutils literal"><span class="pre">configuration</span></tt> object in <tt class="docutils literal"><span class="pre">definition.json</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="19%" />
<col width="17%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Default Value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">appLevel</span></tt></td>
<td>boolean</td>
<td>false</td>
<td>When set to <tt class="docutils literal"><span class="pre">true</span></tt>, the actions, addons, assets,
binders, models, and view of the mojit are
<em>shared</em> with other mojits. Mojits wanting to use
the resources of the shared mojit must
include the YUI module of the application-level
mojit in the <tt class="docutils literal"><span class="pre">requires</span></tt> array.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">setting</span></tt></td>
<td>array of strings</td>
<td>&#8220;master&#8221;</td>
<td>The default value is &#8220;master&#8221;, which maps to the
default configurations for an application. You can
also provide a context to map to configurations.
See <a class="reference external" href="../topics/mojito_using_contexts.html">Using Context Configurations</a> for more
information.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configuring-and-using-an-application-level-mojit">
<span id="configure-mojit-app-level"></span><h3>Configuring and Using an Application-Level Mojit<a class="headerlink" href="#configuring-and-using-an-application-level-mojit" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">definition.json</span></tt> file lets you configure a mojit to be available at the application
level, so that other mojits can use its actions, addons, assets, binders, models, and
views. Mojits available at the application level are not intended to be run alone, and
some of its resources, such as the controller and configuration, are not available to
other mojits.</p>
<p>To configure a mojit to be available at the application level, you set the <tt class="docutils literal"><span class="pre">appLevel</span></tt>
property in <tt class="docutils literal"><span class="pre">definition.json</span></tt> to <tt class="docutils literal"><span class="pre">true</span></tt> as seen below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appLevel&quot;</span><span class="o">:</span> <span class="kc">true</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>To use an application-level mojit, other mojits must include the YUI module name in the
<tt class="docutils literal"><span class="pre">requires</span></tt> array of the controller. For example, to use the <tt class="docutils literal"><span class="pre">FooMojitModel</span></tt> module of
the application-level <tt class="docutils literal"><span class="pre">Foo</span></tt> mojit, the controller of the Bar mojit would include
<tt class="docutils literal"><span class="pre">'FooMojitModel'</span></tt> in the <tt class="docutils literal"><span class="pre">requires</span></tt> array as seen below:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;BarMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">actionContext</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">actionContext</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span><span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Body&quot;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;FooMojitModel&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="configuring-defaults-for-mojit-instances">
<span id="configure-mojit-defaults"></span><h3>Configuring Defaults for Mojit Instances<a class="headerlink" href="#configuring-defaults-for-mojit-instances" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">defaults.json</span></tt> file in the mojit type directory can be used to specify
defaults for each mojit instance of the type. The format is the same as the mojit
instance as specified in the <tt class="docutils literal"><span class="pre">specs</span></tt> object of <tt class="docutils literal"><span class="pre">application.json</span></tt>. This means
that you can specify a default action, as well as any defaults you might want to
put in the <tt class="docutils literal"><span class="pre">config</span></tt> object.</p>
</div>
<div class="section" id="mojit-instances">
<span id="configure-mojit-instances"></span><h3>Mojit Instances<a class="headerlink" href="#mojit-instances" title="Permalink to this headline">¶</a></h3>
<p>A mojit instance is defined with configuration. This configuration specifies
which mojit type to use and configures an instance of that type. The mojit
instances are defined in the <tt class="docutils literal"><span class="pre">specs</span></tt> object of the <tt class="docutils literal"><span class="pre">application.json</span></tt> file.</p>
<p>See <a class="reference internal" href="#configure-mj-app"><em>Application Configuration</em></a> and <a class="reference internal" href="#app-config-ex"><em>Example Application Configurations</em></a> for details of the <tt class="docutils literal"><span class="pre">specs</span></tt>
object.</p>
<div class="section" id="using-mojit-instances">
<span id="configure-mojit-instances-using"></span><h4>Using Mojit Instances<a class="headerlink" href="#using-mojit-instances" title="Permalink to this headline">¶</a></h4>
<p>When a mojit instance is defined in <tt class="docutils literal"><span class="pre">application.json</span></tt>, routing paths defined
in <tt class="docutils literal"><span class="pre">routes.json</span></tt> can be associated with an action of that mojit instance.
Actions are references to functions in the mojit controllers. When a client
makes an HTTP request on a defined routing path, the function in the mojit
controller that is referenced by the action from the mojit instance is called.</p>
<p>For example, the <tt class="docutils literal"><span class="pre">application.json</span></tt> below defines the <tt class="docutils literal"><span class="pre">foo</span></tt> mojit instance
of the mojit type <tt class="docutils literal"><span class="pre">Foo</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;foo&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;Foo&quot;</span><span class="p">,</span>
        <span class="s2">&quot;config&quot;</span><span class="o">:</span> <span class="p">{</span>
          <span class="s2">&quot;message&quot;</span><span class="o">:</span> <span class="s2">&quot;hi&quot;</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">routes.json</span></tt> below uses the <tt class="docutils literal"><span class="pre">foo</span></tt> instance to call the <tt class="docutils literal"><span class="pre">index</span></tt> action
when an HTTP GET request is made on the root path. The <tt class="docutils literal"><span class="pre">index</span></tt> action references
the <tt class="docutils literal"><span class="pre">index</span></tt> function in the controller of the <tt class="docutils literal"><span class="pre">Foo</span></tt> mojit.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;foo index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="routing">
<span id="configure-mj-routing"></span><h2>Routing<a class="headerlink" href="#routing" title="Permalink to this headline">¶</a></h2>
<p>In Mojito, routing is the mapping of URLs to specific mojit actions. This section
will describe the routing configuration file <tt class="docutils literal"><span class="pre">routes.json</span></tt> and the following
two ways to configure routing:</p>
<ul class="simple">
<li>Map Routes to Specific Mojit Instances and Actions</li>
<li>Generate URLs from the Controller</li>
</ul>
<p>See <a class="reference external" href="../code_exs/route_config.html">Code Examples: Configuring Routing</a> to
see an example of configuring routing in a Mojito application.</p>
<div class="section" id="routing-configuration-file">
<span id="configure-routing-file"></span><h3>Routing Configuration File<a class="headerlink" href="#routing-configuration-file" title="Permalink to this headline">¶</a></h3>
<p>The <tt class="docutils literal"><span class="pre">routes.json</span></tt> file contains the routing configuration information in JSON. The JSON
consists of an array of one or more <tt class="docutils literal"><span class="pre">configuration</span></tt> objects that include <tt class="docutils literal"><span class="pre">route</span></tt>
objects specifying route paths, parameters, HTTP methods, and actions.</p>
<p>The table below describes the properties of the <tt class="docutils literal"><span class="pre">route</span></tt> object of  <tt class="docutils literal"><span class="pre">routes.json</span></tt>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="20%" />
<col width="14%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Property</th>
<th class="head">Data Type</th>
<th class="head">Required?</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">call</span></tt></td>
<td>string</td>
<td>Yes</td>
<td>The mojit instance defined in <tt class="docutils literal"><span class="pre">application.json</span></tt>
and the method that is called when an HTTP call is
made on the path specified by <tt class="docutils literal"><span class="pre">path</span></tt>. For
example, to call the <tt class="docutils literal"><span class="pre">index</span></tt> method from the
<tt class="docutils literal"><span class="pre">hello</span></tt> mojit instance, you would use the
following: <tt class="docutils literal"><span class="pre">call:</span> <span class="pre">&quot;hello.index&quot;</span></tt> An anonymous
mojit instance can also be created by prepending
&#8220;&#64;&#8221; to the mojit type. For example, the following
would create an anonymous mojit instance of type
<tt class="docutils literal"><span class="pre">HelloMojit</span></tt> and call the <tt class="docutils literal"><span class="pre">index</span></tt> action for
the <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> mojit: <tt class="docutils literal"><span class="pre">call:</span>
<span class="pre">&quot;&#64;HelloMojito.index&quot;</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">params</span></tt></td>
<td>string</td>
<td>No</td>
<td><p class="first">Query string parameters that developers can
associate with a route path. The default value is an
empty string &#8220;&#8221;. The query string parameters should
be given an object:
<tt class="docutils literal"><span class="pre">params:</span> <span class="pre">{</span> <span class="pre">&quot;name&quot;:</span> <span class="pre">&quot;Tom&quot;,</span> <span class="pre">&quot;age&quot;:</span> <span class="pre">&quot;23&quot;</span> <span class="pre">}</span></tt></p>
<p class="last"><strong>Deprecated</strong>:  <tt class="docutils literal"><span class="pre">params:</span> <span class="pre">&quot;name=Tom&amp;age=23&quot;</span></tt></p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">path</span></tt></td>
<td>string</td>
<td>Yes</td>
<td>The route path that is mapped to the action in the
<tt class="docutils literal"><span class="pre">call</span></tt> property. The route path can have variable
placeholders for the mojit instance and action
that are substituted by the mojit instance and
actions used in the <tt class="docutils literal"><span class="pre">call</span></tt> property.  See also
<a class="reference internal" href="#parameterized-paths"><em>Using Parameterized Paths to Call a Mojit Action</em></a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">regex</span></tt></td>
<td>object</td>
<td>No</td>
<td>An object containing a key-value pair, where the key
is a path parameter and the value contains the regular
expression. For example:
<tt class="docutils literal"><span class="pre">&quot;regex&quot;:</span> <span class="pre">{</span> <span class="pre">&quot;path_param&quot;:</span>&nbsp; <span class="pre">&quot;?:(.*).html&quot;</span> <span class="pre">}</span></tt>
See <a class="reference internal" href="#regex-paths"><em>Using Regular Expressions to Match Routing
Paths</em></a> for more information.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">verbs</span></tt></td>
<td>array of strings</td>
<td>No</td>
<td>The HTTP methods allowed on the route path defined
by <tt class="docutils literal"><span class="pre">path</span></tt>. For example, to allow HTTP GET and
POST calls to be made on the specified path, you
would use the following: <tt class="docutils literal"><span class="pre">&quot;verbs&quot;:</span> <span class="pre">[</span> <span class="pre">&quot;get&quot;,</span>
<span class="pre">&quot;post&quot;</span> <span class="pre">]</span></tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="map-routes-to-specific-mojit-instances-and-actions">
<span id="configure-routing-mapping"></span><h3>Map Routes to Specific Mojit Instances and Actions<a class="headerlink" href="#map-routes-to-specific-mojit-instances-and-actions" title="Permalink to this headline">¶</a></h3>
<p>This type of route configuration is the most sophisticated and recommended for
production applications. To map routes to a mojit instance and action, you create
the file <tt class="docutils literal"><span class="pre">routes.json</span></tt> in your application directory. The <tt class="docutils literal"><span class="pre">routes.json</span></tt> file
allows you to configure a single or multiple routes and specify the HTTP method
and action to use for each route.</p>
<div class="section" id="single-route">
<span id="routing-mapping-single"></span><h4>Single Route<a class="headerlink" href="#single-route" title="Permalink to this headline">¶</a></h4>
<p>To create a route, you need to create a mojit instance that can be mapped to a
path. In the <tt class="docutils literal"><span class="pre">application.json</span></tt> below, the <tt class="docutils literal"><span class="pre">hello</span></tt> instance of type
<tt class="docutils literal"><span class="pre">HelloMojit</span></tt> is defined.</p>
<p><strong>application.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;appPort&quot;</span><span class="o">:</span> <span class="mi">8666</span><span class="p">,</span>
    <span class="s2">&quot;specs&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;hello&quot;</span><span class="o">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;HelloMojit&quot;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>application.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">appPort</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">8666</span>
    <span class="l-Scalar-Plain">specs</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">hello</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">type</span><span class="p-Indicator">:</span> <span class="s">&quot;HelloMojit&quot;</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">hello</span></tt> instance and a function in the <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> controller can now
be mapped to a route path in <tt class="docutils literal"><span class="pre">routes.json</span></tt> file. In the <tt class="docutils literal"><span class="pre">routes.json</span></tt> below,
the <tt class="docutils literal"><span class="pre">index</span></tt> function is called when an HTTP GET call is made on the root path.</p>
<p><strong>routes.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;hello index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;hello.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>routes.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">hello index</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verbs</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;hello.index&quot;</span>
</pre></div>
</div>
<p>Instead of using the <tt class="docutils literal"><span class="pre">hello</span></tt> mojit instance defined in the <tt class="docutils literal"><span class="pre">application.json</span></tt>
shown above, you can create an anonymous instance of <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> for mapping
an action to a route path. In the <tt class="docutils literal"><span class="pre">routes.json</span></tt> below,  an anonymous instance
of <tt class="docutils literal"><span class="pre">HelloMojit</span></tt> is made by prepending &#8220;&#64;&#8221; to the mojit type.</p>
<p><strong>routes.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;hello index&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;@HelloMojit.index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;first_visit&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>routes.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">hello index</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verbs</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;@HelloMojit.index&quot;</span>
      <span class="l-Scalar-Plain">params</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">first_visit</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
</div>
<div class="section" id="multiple-routes">
<span id="routing-mapping-multiple"></span><h4>Multiple Routes<a class="headerlink" href="#multiple-routes" title="Permalink to this headline">¶</a></h4>
<p>To specify multiple routes, you create multiple route objects that contain
<tt class="docutils literal"><span class="pre">verb</span></tt>, <tt class="docutils literal"><span class="pre">path</span></tt>, and <tt class="docutils literal"><span class="pre">call</span></tt> properties in <tt class="docutils literal"><span class="pre">routes.json</span></tt> as seen here:</p>
<p><strong>routes.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;root&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/*&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo-1.index&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;foo_default&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/foo&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo-1.index&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;bar_default&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/bar&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;bar-1.index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;log_request&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>routes.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">root</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verb</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/*&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;foo-1.index&quot;</span>
    <span class="l-Scalar-Plain">foo_default</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verb</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/foo&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;foo-1.index&quot;</span>
    <span class="l-Scalar-Plain">bar_default</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verb</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/bar&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;bar-1.index&quot;</span>
      <span class="l-Scalar-Plain">params</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">page</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
        <span class="l-Scalar-Plain">log_request</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">routes.json</span></tt> and <tt class="docutils literal"><span class="pre">routes.yaml</span></tt> files above create the following routes:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://localhost:8666</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/foo</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/bar</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/anything</span></tt></li>
</ul>
<p>Notice that the <tt class="docutils literal"><span class="pre">routes.json</span></tt> above uses the two mojit instances <tt class="docutils literal"><span class="pre">foo-1</span></tt> and
<tt class="docutils literal"><span class="pre">bar-1</span></tt>; these instances must be defined in the <tt class="docutils literal"><span class="pre">application.json</span></tt> file before
they can be mapped to a route path. Also, the wildcard used in <tt class="docutils literal"><span class="pre">root</span></tt> object
configures Mojito to call <tt class="docutils literal"><span class="pre">foo-1.index</span></tt> when HTTP GET calls are made on any
undefined path.</p>
</div>
</div>
<div class="section" id="adding-routing-parameters">
<span id="routing-params"></span><h3>Adding Routing Parameters<a class="headerlink" href="#adding-routing-parameters" title="Permalink to this headline">¶</a></h3>
<p>You can configure a routing path to have routing parameters with the <tt class="docutils literal"><span class="pre">params</span></tt>
property. Routing parameters are accessible from the <tt class="docutils literal"><span class="pre">ActionContext</span></tt> object
using the <a class="reference external" href="../../api/classes/Params.common.html">Params addon</a>.</p>
<p>In the example <tt class="docutils literal"><span class="pre">routes.json</span></tt> below, routing parameters are added with an object.
To get the value for the routing parameter <tt class="docutils literal"><span class="pre">page</span></tt> from a controller, you would
use <tt class="docutils literal"><span class="pre">ac.params.getFromRoute(&quot;page&quot;)</span></tt>.</p>
<p><strong>routes.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;root&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/*&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo-1.index&quot;</span><span class="p">,</span>
      <span class="s2">&quot;params&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;page&quot;</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;log_request&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>routes.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">root</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verb</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/*&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;foo-1.index&quot;</span>
      <span class="l-Scalar-Plain">params</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">page</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">1</span>
        <span class="l-Scalar-Plain">log_request</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">true</span>
</pre></div>
</div>
<div class="admonition-deprecated admonition">
<p class="first admonition-title">Deprecated</p>
<p class="last">Specifying routing parameters as a query string, such as
<tt class="docutils literal"><span class="pre">&quot;params&quot;:</span> <span class="pre">&quot;page=1&amp;log_request=true&quot;</span></tt>,
is still supported, but may not be in the future.</p>
</div>
</div>
<div class="section" id="using-parameterized-paths-to-call-a-mojit-action">
<span id="parameterized-paths"></span><h3>Using Parameterized Paths to Call a Mojit Action<a class="headerlink" href="#using-parameterized-paths-to-call-a-mojit-action" title="Permalink to this headline">¶</a></h3>
<p>Your routing configuration can also use parameterized paths to call mojit
actions. In the <tt class="docutils literal"><span class="pre">routes.json</span></tt> below, the <tt class="docutils literal"><span class="pre">path</span></tt> property uses parameters
to capture a part of the matched URL and then uses that captured part to
replace <tt class="docutils literal"><span class="pre">{{mojit-action}}</span></tt> in the value for the <tt class="docutils literal"><span class="pre">call</span></tt> property. Any
value can be used for the parameter as long as it is prepended with a
colon (e.g., <tt class="docutils literal"><span class="pre">:foo</span></tt>). After the parameter has been replaced by a value
given in the path, the call to the action should have the following syntax:
<tt class="docutils literal"><span class="pre">{mojit_instance}.(action}</span></tt></p>
<p><strong>routes.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;_foo_action&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;put&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/foo/:mojit-action&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;@foo-1.{mojit-action}&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;_bar_action&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">,</span> <span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="s2">&quot;put&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/bar/:mojit-action&quot;</span><span class="p">,</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;@bar-1.{mojit-action}&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>routes.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">_foo_action</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verb</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;post&quot;</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;put&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/foo/:mojit-action&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;@foo-1.{mojit-action}&quot;</span>
    <span class="l-Scalar-Plain">_bar_action</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verb</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;post&quot;</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;put&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/bar/:mojit-action&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;@bar-1.{mojit-action}&quot;</span>
</pre></div>
</div>
<p>For example, based on the <tt class="docutils literal"><span class="pre">routes.json</span></tt> and <tt class="docutils literal"><span class="pre">routes.yaml</span></tt> above, an HTTP GET call made on the
path <tt class="docutils literal"><span class="pre">http://localhost:8666/foo/index</span></tt> would call the <tt class="docutils literal"><span class="pre">index</span></tt> function in
the controller because the value of <tt class="docutils literal"><span class="pre">:mojit-action</span></tt> in the path (<tt class="docutils literal"><span class="pre">index</span></tt> in
this case) would be then replace <tt class="docutils literal"><span class="pre">{mojit-action}}</span></tt> in the <tt class="docutils literal"><span class="pre">call</span></tt> property.
The following URLs call the <tt class="docutils literal"><span class="pre">index</span></tt> and <tt class="docutils literal"><span class="pre">myAction</span></tt> functions in the controller.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/foo/index</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/foo/myAction</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/bar/index</span></tt></li>
</ul>
</div>
<div class="section" id="using-regular-expressions-to-match-routing-paths">
<span id="regex-paths"></span><h3>Using Regular Expressions to Match Routing Paths<a class="headerlink" href="#using-regular-expressions-to-match-routing-paths" title="Permalink to this headline">¶</a></h3>
<p>You can use the <tt class="docutils literal"><span class="pre">regex</span></tt> property of a routing object to define a key-value
pair that defines a path parameter and a regular expression. The key is prepended
with a colon when represented as a path parameter. For example, the key <tt class="docutils literal"><span class="pre">name</span></tt>
would be represented as <tt class="docutils literal"><span class="pre">:name</span></tt> as a path parameter: <tt class="docutils literal"><span class="pre">&quot;path&quot;:</span> <span class="pre">&quot;/:name&quot;</span></tt>.
The associated value contains the regular expression that is matched against
the request URL.</p>
<p>For example, in the <tt class="docutils literal"><span class="pre">routes.json</span></tt> below, if the path of the request
matches the regular expression <tt class="docutils literal"><span class="pre">\\d{1,2}_[Mm]ojitos?</span></tt>, the <tt class="docutils literal"><span class="pre">index</span></tt>
action of the mojit instance is called.</p>
<p><strong>routes.json</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;settings&quot;</span><span class="o">:</span> <span class="p">[</span> <span class="s2">&quot;master&quot;</span> <span class="p">],</span>
    <span class="s2">&quot;regex_path&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;verbs&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
      <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/:matched_path&quot;</span><span class="p">,</span>
      <span class="s2">&quot;regex&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;matched_path&quot;</span><span class="o">:</span> <span class="s2">&quot;\\d{1,2}_[Mm]ojitos?&quot;</span> <span class="p">},</span>
      <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;myMojit.index&quot;</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
<p><strong>routes.yaml</strong></p>
<div class="highlight-yaml"><div class="highlight"><pre><span class="nn">---</span>
  <span class="p-Indicator">-</span>
    <span class="l-Scalar-Plain">settings</span><span class="p-Indicator">:</span>
      <span class="p-Indicator">-</span> <span class="s">&quot;master&quot;</span>
    <span class="l-Scalar-Plain">regex_path</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">verbs</span><span class="p-Indicator">:</span>
        <span class="p-Indicator">-</span> <span class="s">&quot;get&quot;</span>
      <span class="l-Scalar-Plain">path</span><span class="p-Indicator">:</span> <span class="s">&quot;/:matched_path&quot;</span>
      <span class="l-Scalar-Plain">regex</span><span class="p-Indicator">:</span>
        <span class="l-Scalar-Plain">matched_path</span><span class="p-Indicator">:</span> <span class="s">&quot;\\d{1,2}_[Mm]ojitos?&quot;</span>
      <span class="l-Scalar-Plain">call</span><span class="p-Indicator">:</span> <span class="s">&quot;myMojit.index&quot;</span>
</pre></div>
</div>
<p>Based on the above routing configuration, the following URLs
would call the <tt class="docutils literal"><span class="pre">index</span></tt> action:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/1_mojito</span></tt></li>
<li><tt class="docutils literal"><span class="pre">http://localhost:8666/99_Mojitos</span></tt></li>
</ul>
</div>
<div class="section" id="generate-urls-from-the-controller">
<span id="generate-urls"></span><h3>Generate URLs from the Controller<a class="headerlink" href="#generate-urls-from-the-controller" title="Permalink to this headline">¶</a></h3>
<p>The Mojito JavaScript library contains the <a class="reference external" href="../../api/classes/Url.common.html">Url addon</a>
that allows you to create a URL with the mojit instance, the action, and parameters from
the controller.</p>
<p>In the code snippet below from <tt class="docutils literal"><span class="pre">routes.json</span></tt>,  the mojit instance, the HTTP method, and
the action are specified in the <tt class="docutils literal"><span class="pre">&quot;foo_default&quot;</span></tt> object.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="s2">&quot;foo_default&quot;</span><span class="o">:</span> <span class="p">{</span>
  <span class="s2">&quot;verb&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;get&quot;</span><span class="p">],</span>
  <span class="s2">&quot;path&quot;</span><span class="o">:</span> <span class="s2">&quot;/foo&quot;</span><span class="p">,</span>
  <span class="s2">&quot;call&quot;</span><span class="o">:</span> <span class="s2">&quot;foo-1.index&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this code snippet from <tt class="docutils literal"><span class="pre">controller.js</span></tt>, the <a class="reference external" href="../../api/classes/Url.common.html">Url addon</a>
with the <tt class="docutils literal"><span class="pre">make</span></tt> method use the mojit instance and function specified in the
<tt class="docutils literal"><span class="pre">routes.json</span></tt> above to create the URL <tt class="docutils literal"><span class="pre">/foo</span></tt> with the query string parameters
<tt class="docutils literal"><span class="pre">?foo=bar</span></tt>.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">...</span>
  <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">ac</span><span class="p">.</span><span class="nx">url</span><span class="p">.</span><span class="nx">make</span><span class="p">(</span><span class="s1">&#39;foo-1&#39;</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="s1">&#39;GET&#39;</span><span class="p">,{</span><span class="s1">&#39;foo&#39;</span><span class="o">:</span> <span class="s1">&#39;bar&#39;</span><span class="p">});</span>
  <span class="p">}</span>
<span class="p">...</span>
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">index</span></tt> function above returns the following URL: <tt class="docutils literal"><span class="pre">http://localhost:8666/foo?foo=bar</span></tt></p>
</div>
</div>
<div class="section" id="accessing-configurations-from-mojits">
<span id="mojito-configuring-access"></span><h2>Accessing Configurations from Mojits<a class="headerlink" href="#accessing-configurations-from-mojits" title="Permalink to this headline">¶</a></h2>
<p>The model and binder can access mojit configurations from the <tt class="docutils literal"><span class="pre">init</span></tt>
function. The controller and model are passed <tt class="docutils literal"><span class="pre">configuration</span></tt> objects. The controller
can access configuration with the <tt class="docutils literal"><span class="pre">Config</span></tt> addon.
The <tt class="docutils literal"><span class="pre">init</span></tt> function in the binder, instead of a configuration object, is passed the
<tt class="docutils literal"><span class="pre">mojitProxy</span></tt> object, which enables you to access configurations.</p>
<div class="section" id="application-level-configurations">
<span id="configuring-access-applevel"></span><h3>Application-Level Configurations<a class="headerlink" href="#application-level-configurations" title="Permalink to this headline">¶</a></h3>
<p>Only the mojit controller has access to application-level configurations
using the ActionContext <tt class="docutils literal"><span class="pre">Config</span></tt> addon.</p>
<div class="section" id="application-json">
<span id="access-applicationjson"></span><h4>application.json<a class="headerlink" href="#application-json" title="Permalink to this headline">¶</a></h4>
<p>The controller functions that are passed an <tt class="docutils literal"><span class="pre">actionContext</span></tt> object can get the
application configurations in <tt class="docutils literal"><span class="pre">application.json</span></tt> with the method <tt class="docutils literal"><span class="pre">getAppConfig</span></tt>
of the <tt class="docutils literal"><span class="pre">Config</span></tt> addon.</p>
<p>For example, if you wanted to access the <tt class="docutils literal"><span class="pre">specs</span></tt> object defined in <tt class="docutils literal"><span class="pre">application.json</span></tt>,
you would use <tt class="docutils literal"><span class="pre">ac.config.getAppConfig().specs</span></tt> as shown here:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;myMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Get the &#39;specs&#39; object from the application configuration</span>
      <span class="c1">// through the Config addon.</span>
      <span class="kd">var</span> <span class="nx">app_specs</span> <span class="o">=</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">getAppConfig</span><span class="p">().</span><span class="nx">specs</span><span class="p">;</span>
      <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">app_specs</span><span class="p">);</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span> <span class="nx">status</span><span class="o">:</span> <span class="s2">&quot;Showing app config in the log.&quot;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-config-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
<div class="section" id="routes-json">
<span id="access-routesjson"></span><h4>routes.json<a class="headerlink" href="#routes-json" title="Permalink to this headline">¶</a></h4>
<p>The routing configuration can be accessed with the method <tt class="docutils literal"><span class="pre">getRoutes</span></tt>
of the <tt class="docutils literal"><span class="pre">Config</span></tt> addon.</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="nx">YUI</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="s1">&#39;myMojit&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">Y</span><span class="p">,</span> <span class="nx">NAME</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">Y</span><span class="p">.</span><span class="nx">namespace</span><span class="p">(</span><span class="s1">&#39;mojito.controllers&#39;</span><span class="p">)[</span><span class="nx">NAME</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">index</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ac</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// Get the routing configuration through</span>
      <span class="c1">// the Config addon.</span>
      <span class="kd">var</span> <span class="nx">route_config</span> <span class="o">=</span> <span class="nx">ac</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">getRoutes</span><span class="p">();</span>
      <span class="nx">Y</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">route_config</span><span class="p">);</span>
      <span class="nx">ac</span><span class="p">.</span><span class="nx">done</span><span class="p">({</span> <span class="nx">status</span><span class="o">:</span> <span class="s2">&quot;Showing routing config in the log.&quot;</span><span class="p">});</span>
    <span class="p">}</span>
  <span class="p">};</span>
<span class="p">},</span> <span class="s1">&#39;0.0.1&#39;</span><span class="p">,</span> <span class="p">{</span><span class="nx">requires</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;mojito&#39;</span><span class="p">,</span> <span class="s1">&#39;mojito-config-addon&#39;</span><span class="p">]});</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="application-context">
<span id="access-configs-context"></span><h3>Application Context<a class="headerlink" href="#application-context" title="Permalink to this headline">¶</a></h3>
<p>The contexts for an application specify environment variables such as the runtime
environment, the location, device, region, etc. Once again, only the controller that is
passed the <tt class="docutils literal"><span class="pre">actionContext</span></tt> object can access the context. You can access the context
using <tt class="docutils literal"><span class="pre">ac.context</span></tt>.</p>
<p>Below is an example of the <tt class="docutils literal"><span class="pre">context</span></tt> object:</p>
<div class="highlight-javascript"><div class="highlight"><pre><span class="p">{</span>
  <span class="nx">runtime</span><span class="o">:</span> <span class="s1">&#39;server&#39;</span><span class="p">,</span>
  <span class="nx">site</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">device</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">lang</span><span class="o">:</span> <span class="s1">&#39;en-US&#39;</span><span class="p">,</span>
  <span class="nx">langs</span><span class="o">:</span> <span class="s1">&#39;en-US,en&#39;</span><span class="p">,</span>
  <span class="nx">region</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">jurisdiction</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">bucket</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">flavor</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
  <span class="nx">tz</span><span class="o">:</span> <span class="s1">&#39;&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="mojit-level-configurations">
<span id="configuring-access-mojit"></span><h3>Mojit-Level Configurations<a class="headerlink" href="#mojit-level-configurations" title="Permalink to this headline">¶</a></h3>
<p>Mojit-level configurations can be specified in two locations. You can specify mojit-level
configurations in the <tt class="docutils literal"><span class="pre">config</span></tt> object of a mojit instance in <tt class="docutils literal"><span class="pre">application.json</span></tt> or
default configurations for a mojit in <tt class="docutils literal"><span class="pre">mojits/{mojit_name}/defaults.json</span></tt>. The
configurations of <tt class="docutils literal"><span class="pre">application.json</span></tt> override those in <tt class="docutils literal"><span class="pre">defaults.json</span></tt>.</p>
<div class="section" id="controller">
<span id="access-mojit-controller"></span><h4>Controller<a class="headerlink" href="#controller" title="Permalink to this headline">¶</a></h4>
<p>Controllers can access mojit-level configurations from the <tt class="docutils literal"><span class="pre">actionContext</span></tt> object
using the <a class="reference external" href="../../api/classes/Config.common.html">Config addon</a>.
Use <tt class="docutils literal"><span class="pre">ac.config.get</span></tt> to access configuration values from <tt class="docutils literal"><span class="pre">application.json</span></tt> and
<tt class="docutils literal"><span class="pre">defaults.json</span></tt> and <tt class="docutils literal"><span class="pre">ac.config.getDefinition</span></tt> to access definition values from
<tt class="docutils literal"><span class="pre">definition.json</span></tt>.</p>
</div>
<div class="section" id="model">
<span id="access-mojit-model"></span><h4>Model<a class="headerlink" href="#model" title="Permalink to this headline">¶</a></h4>
<p>The <tt class="docutils literal"><span class="pre">init</span></tt> function in the model is also passed the mojit-level configurations.
If other model functions need the configurations, you need to save the
configurations to the <tt class="docutils literal"><span class="pre">this</span></tt> reference because no <tt class="docutils literal"><span class="pre">actionContext</span></tt> object is
passed to the model, so your model does not have access to the <tt class="docutils literal"><span class="pre">Config</span></tt> addon.</p>
</div>
<div class="section" id="binder">
<span id="access-mojit-binder"></span><h4>Binder<a class="headerlink" href="#binder" title="Permalink to this headline">¶</a></h4>
<p>As mentioned earlier, you access configurations through the <tt class="docutils literal"><span class="pre">mojitProxy</span></tt> object by
referencing the <tt class="docutils literal"><span class="pre">config</span></tt> property: <tt class="docutils literal"><span class="pre">mojitProxy.config</span></tt></p>
</div>
</div>
</div>
</div>

   </div>

